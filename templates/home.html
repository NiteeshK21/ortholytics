<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Wizard</title>
    <style>
         /* Shared CSS styles */
         body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #0a0a0a;
            color: white;
            overflow-x: hidden;
        }

        .hero {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('hero-background.jpg') center/cover no-repeat;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #59d757;
        }

        .hero p {
            font-size: 1.5rem;
            margin-bottom: 40px;
            color: #aaa;
        }

        .hero button {
            background-color: #8fbc8f;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease;
        }

        .hero button:hover {
            background-color: #59d757;
        }

        /* Custom Form Styles */
        .form-container {
            display: none; /* Initially hidden */
            padding: 20px;
            text-align: center;
        }

        .form-step {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .form-step.active {
            display: flex;
        }

        .form-step input[type="text"],
        .form-step input[type="email"] {
            width: 80%;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #8fbc8f;
            border-radius: 5px;
            background-color: #222;
            color: white;
        }

        .form-step button {
            background-color: #8fbc8f;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .form-step button:hover {
            background-color: #59d757;
        }

        /* Additional styles for radio buttons */
        .radio-group {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }

        .radio-group label {
            margin: 0 10px;
            font-size: 1rem;
        }

        .radio-group input[type="radio"] {
            margin-right: 5px;
        }
         /* Audio Analysis Styles */
         .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #111;
            border: none;
            border-radius: 5px;
        }

        h1, h2 {
            color: #59d757;
        }

        input[type="file"] {
            margin-bottom: 10px;
            background-color: #222;
            color: white;
            border: 1px solid #8fbc8f;
            border-radius: 5px;
            padding: 5px;
        }

        button {
            background-color: #8fbc8f;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #59d757;
        }

        #analysisContainer {
            margin-top: 20px;
            background-color: #222;
            padding: 10px;
            border-radius: 5px;
        }

        #analysisText {
            background-color: #333;
            color: white;
            padding: 10px;
            border: 1px solid #8fbc8f;
            border-radius: 5px;
        }
       

    </style>
</head>
<body>

    <!-- Welcome Page -->
    <div class="hero" id="welcomePage">
        <h1>Welcome to Audio Wizard</h1>
        <p>Discover the magic of sound with our state-of-the-art audio analysis tool.</p>
        <button onclick="navigateToForm()">Start Your Journey</button>
    </div>

    <!-- Custom Form Page -->
    <div class="form-container" id="formPage">
        <div class="form-step active" id="step1">
            <h2>Audio type:</h2>
            <div class="radio-group">
                <label><input type="radio" name="audioType" value="Single Audio" onclick="scrollToNext('step2')"> Single Audio</label>
                <label><input type="radio" name="audioType" value="Multi Audio" onclick="scrollToNext('step2')"> Multi Audio</label>
            </div>
        </div>
        <div class="form-step" id="step2">
            <h2>Organization Name:</h2>
            <input type="text" id="organization" placeholder="Enter your organization name">
            <button onclick="submitForm()">Submit</button>
        </div>
        
    </div>

   
     <!-- Audio Analysis Page -->
     <div class="container" id="audioAnalysisPage" style="display: none;">
        <h1>Upload Audio File</h1>
        <input type="file" id="audioFile" accept="audio/*">
        <button onclick="uploadAudio()">Upload</button>

        <div id="analysisContainer">
            <h2>Analysis Results:</h2>
            <div id="analysisText">Your results will appear here...</div>
        </div>
    </div>


<script>
        // Variables to store form data
        var audioType = '';
        var organizationName = '';
    
    function navigateToForm() {
    // Scroll to the form container
    document.getElementById('formPage').style.display = 'none';
            document.getElementById('audioAnalysisPage').style.display = 'block';
            document.getElementById('audioAnalysisPage').scrollIntoView({ behavior: 'smooth' });
}

    function scrollToNext(stepId) {
        // Save audio type from radio buttons
        var radios = document.getElementsByName('audioType');
        for (var i = 0, length = radios.length; i < length; i++) {
            if (radios[i].checked) {
                audioType = radios[i].value;
                break;
            }
        }

        // Scroll to the next step
        document.getElementById(stepId).classList.add('active');
        document.getElementById(stepId).scrollIntoView({ behavior: 'smooth' });
    }

    function submitForm() {
        // Save organization name
        organizationName = document.getElementById('organization').value;

        if (organizationName === '') {
            alert('Please enter your organization name.');
            return;
        }

        // Here you can handle the form data, e.g., send it to a server or use it in your application
        console.log('Audio Type:', audioType);
        console.log('Organization Name:', organizationName);

        // Hide the form section and show the Dashboard section
        document.getElementById('formPage').style.display = 'none';
        document.getElementById('dashboardPage').style.display = 'block';

        // Update the navbar with the organization name and audio type
        document.getElementById('organizationName').textContent = organizationName;
        document.getElementById('audioTypeSelected').textContent = audioType;
    }
    function uploadAudio() {
            var audioFile = document.getElementById('audioFile').files[0];
            if (audioFile) {
                // Simulating analysis completion after 3 seconds
                setTimeout(function () {
                    console.log(audioFile);
                    var formData = new FormData();
                    // var formData = new FormData($(this)[0]);
                    formData.append("audioFile", audioFile);

                    var csrftoken = getCookie('csrftoken');

                    $.ajax({
                        url: "/",
                        type: "POST",
                        data: formData,
                        processData: false,
                        contentType: false,
                        headers: {
                            "X-CSRFToken": csrftoken  // Include CSRF token in request headers
                        },
                        success: function (response) {
                            console.log(response['conversation']);
                            document.getElementById("analysisText").innerText=response['conversation'];
                            console.log("File uploaded successfully");
                        },
                        error: function (xhr, status, error) {
                            console.error("Error uploading file: " + error);
                        }
                    });
                    // Example analysis text
                    var analysisText = "Analysing audio conversation......";
                    // Display analysis results in the container
                    document.getElementById('analysisText').innerText = analysisText;
                }, 3000);
            } else {
                alert('Please select an audio file to upload.');
            }
        }
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

</script>

